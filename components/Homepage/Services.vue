<template>
  <section id="whatwedo" class="bg-pink">
    <div class="relative flex font-display h-screen">
      <!-- <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pb-20">
        <div class="h-auto">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="461"
            height="208"
            viewBox="0 0 461 208"
            fill="none"
          >
            <path
              d="M13.7293 40.096C13.7293 52.48 22.2253 58.48 31.5373 58.48C41.2333 58.48 48.9133 51.952 48.9133 40.384C48.9133 28 40.4173 22 31.1053 22C21.4093 22 13.7293 28.528 13.7293 40.096ZM19.2013 39.184C19.2013 30.16 23.7613 24.304 30.3853 24.304C37.4893 24.304 43.4413 31.024 43.4413 41.344C43.4413 50.464 38.8813 56.176 32.2573 56.176C25.1533 56.176 19.2013 49.504 19.2013 39.184ZM79.8058 54.544L76.1578 54.928C75.9658 54.592 75.7738 53.872 75.7738 51.952V33.04H66.8458V34.864L71.1658 35.44V49.264C71.1658 52.72 68.2858 55.024 64.9258 55.024C61.9978 55.024 60.0298 53.296 60.0298 49.12V33.04H51.1018V34.864L55.4218 35.44V50.56C55.4218 55.888 58.3978 58.48 62.6698 58.48C66.4618 58.48 69.3898 56.464 71.0698 53.872H71.1658L71.8378 58.384L72.0298 58.48L79.9978 56.176L79.8058 54.544ZM97.0981 32.56C94.0261 32.56 91.8661 34.576 90.1861 37.168H90.0901V32.848L89.8981 32.752L80.8741 35.344L81.1621 36.784L85.3861 36.544L85.4821 36.64V56.08L81.6421 56.176V58H95.3701V56.176L90.0901 56.08V42.256C90.0901 38.32 92.2981 36.832 94.1221 36.832C95.9941 36.832 96.6181 38.368 98.4421 38.368C99.4501 38.368 100.938 37.888 100.938 35.776C100.938 33.424 99.1141 32.56 97.0981 32.56ZM272.697 96.008C272.697 93.272 274.617 91.112 277.833 91.112C281.721 91.112 285.033 94.28 287.145 101.048L288.681 100.664L286.665 87.464L285.129 87.368L284.313 91.064C282.201 89.528 280.137 89 277.977 89C273.033 89 268.281 91.64 268.281 97.784C268.281 109.208 284.985 109.976 284.985 118.232C284.985 121.496 282.489 123.368 279.417 123.368C275.385 123.368 271.929 120.248 269.145 112.952L267.609 113.336L269.625 127.016L271.161 127.112L272.025 123.368C274.329 124.952 277.017 125.48 279.321 125.48C283.881 125.48 289.401 123.368 289.401 116.456C289.401 104.648 272.697 103.976 272.697 96.008ZM314.557 116.6H314.461C312.685 119.912 309.757 121.832 306.445 121.832C302.269 121.832 297.853 118.76 297.853 111.608C297.853 111.128 297.853 110.696 297.901 110.264H314.173L314.269 110.168C314.365 109.592 314.413 108.92 314.413 108.248C314.413 103.016 311.485 99.56 305.725 99.56C298.765 99.56 293.341 104.552 293.341 113.048C293.341 121.736 298.909 125.48 304.669 125.48C308.941 125.48 313.405 123.464 315.805 117.272L314.557 116.6ZM304.717 101.768C307.741 101.768 309.421 104.264 309.085 108.152H298.237C299.197 104.12 301.789 101.768 304.717 101.768ZM333.958 99.56C330.886 99.56 328.726 101.576 327.046 104.168H326.95V99.848L326.758 99.752L317.734 102.344L318.022 103.784L322.246 103.544L322.342 103.64V123.08L318.502 123.176V125H332.23V123.176L326.95 123.08V109.256C326.95 105.32 329.158 103.832 330.982 103.832C332.854 103.832 333.478 105.368 335.302 105.368C336.31 105.368 337.798 104.888 337.798 102.776C337.798 100.424 335.974 99.56 333.958 99.56ZM337.78 101.864L340.66 101.96L349.78 125H352.084L361.204 101.96L364.084 101.864V100.04H355.252V101.864L358.612 101.96L352.18 118.76H352.084L345.748 101.96L349.108 101.864V100.04H337.78V101.864ZM371.373 95C373.197 95 374.493 93.704 374.493 91.832C374.493 90.008 373.197 88.712 371.373 88.712C369.501 88.712 368.205 90.008 368.205 91.832C368.205 93.704 369.501 95 371.373 95ZM364.749 102.344L365.037 103.784L369.261 103.544L369.357 103.64V123.08L365.517 123.176V125H377.805V123.176L373.965 123.08V99.848L373.773 99.752L364.749 102.344ZM380.29 113.096C380.29 121.736 385.858 125.48 391.57 125.48C395.746 125.48 400.066 123.464 402.418 117.272L401.17 116.6H401.074C399.298 119.912 396.274 121.736 393.202 121.736C388.834 121.736 385.09 118.088 385.09 111.32C385.09 105.32 388.018 101.768 391.714 101.768C396.418 101.768 395.074 107.672 398.338 107.672C399.49 107.672 400.738 106.952 400.738 104.888C400.738 100.856 396.13 99.56 392.626 99.56C385.714 99.56 380.29 104.552 380.29 113.096ZM426.213 116.6H426.117C424.341 119.912 421.413 121.832 418.101 121.832C413.925 121.832 409.509 118.76 409.509 111.608C409.509 111.128 409.509 110.696 409.557 110.264H425.829L425.925 110.168C426.021 109.592 426.069 108.92 426.069 108.248C426.069 103.016 423.141 99.56 417.381 99.56C410.421 99.56 404.997 104.552 404.997 113.048C404.997 121.736 410.565 125.48 416.325 125.48C420.597 125.48 425.061 123.464 427.461 117.272L426.213 116.6ZM416.373 101.768C419.397 101.768 421.077 104.264 420.741 108.152H409.893C410.853 104.12 413.445 101.768 416.373 101.768ZM435.678 104.552C435.678 102.824 436.878 101.576 438.99 101.576C440.958 101.576 443.358 102.68 445.566 108.44L447.102 108.152L446.19 98.408L444.75 98.312L444.126 101.192C442.686 100.28 440.814 99.56 438.558 99.56C435.102 99.56 431.406 101.288 431.406 105.8C431.406 113.576 443.022 113.864 443.022 120.056C443.022 122.36 441.438 123.368 439.518 123.368C437.598 123.368 434.382 122.36 432.462 115.352L430.926 115.64L431.502 126.44L432.942 126.632L433.662 123.752C435.294 124.76 437.358 125.48 439.758 125.48C443.214 125.48 447.438 123.992 447.438 118.856C447.438 110.312 435.678 109.88 435.678 104.552Z"
              fill="#006838"
            />
            <path
              d="M106 48H435.392C436.994 48 438.56 48.48 439.888 49.3781V49.3781C449.997 56.2189 449.997 71.1086 439.888 77.9493V77.9493C438.56 78.8474 436.994 79.3274 435.392 79.3274H24.4665C23.1743 79.3274 21.9089 79.6965 20.8193 80.3911V80.3911C11.1142 86.5783 11.1142 100.749 20.8193 106.936V106.936C21.9089 107.631 23.1743 108 24.4665 108H252"
              stroke="#006838"
              stroke-width="4"
            />
          </svg>
          <div class="text-green ml-5">
            From digital strategy, interactive design and full-stack
            development, our complete range of expertise makes us key players in
            implementing digital solutions for small to large-scale web
            projects. Learn more here.
          </div>
        </div>
        <div>We can make your next</div>
      </div> -->

      <div
        id="services"
        class="flex flex-col justify-center text-green text-6xl w-2/5 pl-16 pt-16 pb-16"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="461"
          height="208"
          viewBox="0 0 461 208"
          fill="none"
        >
          <path
            d="M13.7293 40.096C13.7293 52.48 22.2253 58.48 31.5373 58.48C41.2333 58.48 48.9133 51.952 48.9133 40.384C48.9133 28 40.4173 22 31.1053 22C21.4093 22 13.7293 28.528 13.7293 40.096ZM19.2013 39.184C19.2013 30.16 23.7613 24.304 30.3853 24.304C37.4893 24.304 43.4413 31.024 43.4413 41.344C43.4413 50.464 38.8813 56.176 32.2573 56.176C25.1533 56.176 19.2013 49.504 19.2013 39.184ZM79.8058 54.544L76.1578 54.928C75.9658 54.592 75.7738 53.872 75.7738 51.952V33.04H66.8458V34.864L71.1658 35.44V49.264C71.1658 52.72 68.2858 55.024 64.9258 55.024C61.9978 55.024 60.0298 53.296 60.0298 49.12V33.04H51.1018V34.864L55.4218 35.44V50.56C55.4218 55.888 58.3978 58.48 62.6698 58.48C66.4618 58.48 69.3898 56.464 71.0698 53.872H71.1658L71.8378 58.384L72.0298 58.48L79.9978 56.176L79.8058 54.544ZM97.0981 32.56C94.0261 32.56 91.8661 34.576 90.1861 37.168H90.0901V32.848L89.8981 32.752L80.8741 35.344L81.1621 36.784L85.3861 36.544L85.4821 36.64V56.08L81.6421 56.176V58H95.3701V56.176L90.0901 56.08V42.256C90.0901 38.32 92.2981 36.832 94.1221 36.832C95.9941 36.832 96.6181 38.368 98.4421 38.368C99.4501 38.368 100.938 37.888 100.938 35.776C100.938 33.424 99.1141 32.56 97.0981 32.56ZM272.697 96.008C272.697 93.272 274.617 91.112 277.833 91.112C281.721 91.112 285.033 94.28 287.145 101.048L288.681 100.664L286.665 87.464L285.129 87.368L284.313 91.064C282.201 89.528 280.137 89 277.977 89C273.033 89 268.281 91.64 268.281 97.784C268.281 109.208 284.985 109.976 284.985 118.232C284.985 121.496 282.489 123.368 279.417 123.368C275.385 123.368 271.929 120.248 269.145 112.952L267.609 113.336L269.625 127.016L271.161 127.112L272.025 123.368C274.329 124.952 277.017 125.48 279.321 125.48C283.881 125.48 289.401 123.368 289.401 116.456C289.401 104.648 272.697 103.976 272.697 96.008ZM314.557 116.6H314.461C312.685 119.912 309.757 121.832 306.445 121.832C302.269 121.832 297.853 118.76 297.853 111.608C297.853 111.128 297.853 110.696 297.901 110.264H314.173L314.269 110.168C314.365 109.592 314.413 108.92 314.413 108.248C314.413 103.016 311.485 99.56 305.725 99.56C298.765 99.56 293.341 104.552 293.341 113.048C293.341 121.736 298.909 125.48 304.669 125.48C308.941 125.48 313.405 123.464 315.805 117.272L314.557 116.6ZM304.717 101.768C307.741 101.768 309.421 104.264 309.085 108.152H298.237C299.197 104.12 301.789 101.768 304.717 101.768ZM333.958 99.56C330.886 99.56 328.726 101.576 327.046 104.168H326.95V99.848L326.758 99.752L317.734 102.344L318.022 103.784L322.246 103.544L322.342 103.64V123.08L318.502 123.176V125H332.23V123.176L326.95 123.08V109.256C326.95 105.32 329.158 103.832 330.982 103.832C332.854 103.832 333.478 105.368 335.302 105.368C336.31 105.368 337.798 104.888 337.798 102.776C337.798 100.424 335.974 99.56 333.958 99.56ZM337.78 101.864L340.66 101.96L349.78 125H352.084L361.204 101.96L364.084 101.864V100.04H355.252V101.864L358.612 101.96L352.18 118.76H352.084L345.748 101.96L349.108 101.864V100.04H337.78V101.864ZM371.373 95C373.197 95 374.493 93.704 374.493 91.832C374.493 90.008 373.197 88.712 371.373 88.712C369.501 88.712 368.205 90.008 368.205 91.832C368.205 93.704 369.501 95 371.373 95ZM364.749 102.344L365.037 103.784L369.261 103.544L369.357 103.64V123.08L365.517 123.176V125H377.805V123.176L373.965 123.08V99.848L373.773 99.752L364.749 102.344ZM380.29 113.096C380.29 121.736 385.858 125.48 391.57 125.48C395.746 125.48 400.066 123.464 402.418 117.272L401.17 116.6H401.074C399.298 119.912 396.274 121.736 393.202 121.736C388.834 121.736 385.09 118.088 385.09 111.32C385.09 105.32 388.018 101.768 391.714 101.768C396.418 101.768 395.074 107.672 398.338 107.672C399.49 107.672 400.738 106.952 400.738 104.888C400.738 100.856 396.13 99.56 392.626 99.56C385.714 99.56 380.29 104.552 380.29 113.096ZM426.213 116.6H426.117C424.341 119.912 421.413 121.832 418.101 121.832C413.925 121.832 409.509 118.76 409.509 111.608C409.509 111.128 409.509 110.696 409.557 110.264H425.829L425.925 110.168C426.021 109.592 426.069 108.92 426.069 108.248C426.069 103.016 423.141 99.56 417.381 99.56C410.421 99.56 404.997 104.552 404.997 113.048C404.997 121.736 410.565 125.48 416.325 125.48C420.597 125.48 425.061 123.464 427.461 117.272L426.213 116.6ZM416.373 101.768C419.397 101.768 421.077 104.264 420.741 108.152H409.893C410.853 104.12 413.445 101.768 416.373 101.768ZM435.678 104.552C435.678 102.824 436.878 101.576 438.99 101.576C440.958 101.576 443.358 102.68 445.566 108.44L447.102 108.152L446.19 98.408L444.75 98.312L444.126 101.192C442.686 100.28 440.814 99.56 438.558 99.56C435.102 99.56 431.406 101.288 431.406 105.8C431.406 113.576 443.022 113.864 443.022 120.056C443.022 122.36 441.438 123.368 439.518 123.368C437.598 123.368 434.382 122.36 432.462 115.352L430.926 115.64L431.502 126.44L432.942 126.632L433.662 123.752C435.294 124.76 437.358 125.48 439.758 125.48C443.214 125.48 447.438 123.992 447.438 118.856C447.438 110.312 435.678 109.88 435.678 104.552Z"
            fill="#006838"
          />
          <path
            d="M106 48H435.392C436.994 48 438.56 48.48 439.888 49.3781V49.3781C449.997 56.2189 449.997 71.1086 439.888 77.9493V77.9493C438.56 78.8474 436.994 79.3274 435.392 79.3274H24.4665C23.1743 79.3274 21.9089 79.6965 20.8193 80.3911V80.3911C11.1142 86.5783 11.1142 100.749 20.8193 106.936V106.936C21.9089 107.631 23.1743 108 24.4665 108H252"
            stroke="#006838"
            stroke-width="4"
          />
        </svg>
        <div class="text-green ml-5 text-sm">
          From digital strategy, interactive design and full-stack development,
          our complete range of expertise makes us key players in implementing
          digital solutions for small to large-scale web projects. Learn more
          here.
        </div>
        <div
          id="design"
          class="py-8 ml-5"
          @click="clickable ? serviceClick('design') : null"
        >
          design
        </div>
        <div
          id="develop"
          class="py-8 ml-5"
          @click="clickable ? serviceClick('develop') : null"
        >
          develop
        </div>
        <div
          id="etc"
          class="py-8 ml-5"
          @click="clickable ? serviceClick('etc') : null"
        >
          etc.
        </div>
      </div>
      <div class="relative w-3/5">
        <div
          v-for="item in servicesDetail"
          :key="item.key"
          :id="`${item.key}-detail`"
          class="absolute inset-0 flex flex-col justify-center text-2xl text-white pl-16"
        >
          <div v-for="(detail, i) in item.details" :key="i" class="py-6">
            {{ detail }}
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script>
export default {
  mounted() {
    this.scrollAnimate()
  },
  data() {
    return {
      clickable: false,
      currentService: null,
      servicesDetail: [
        {
          key: 'design',
          details: [
            'ux/ui design',
            'prototyping',
            'graphic design',
            'package design',
            'creative direction',
          ],
        },
        {
          key: 'develop',
          details: [
            'website',
            'application',
            'desktop',
            'mobile',
            'vuejs',
            'nodejs',
            'JAMstack',
          ],
        },
        {
          key: 'etc',
          details: [
            'ux strategy',
            'innovation workshops',
            'business model design',
            'analytics',
            'data science',
            'machine learning',
          ],
        },
      ],
    }
  },
  methods: {
    serviceClick(service) {
      //i should probably do this without a timeline huh?
      gsap.set(`#${service}-detail`, { opacity: 100, y: 0 }, 'x')
      const tl = gsap.timeline()
      tl.add('x')
        .to(`#${this.currentService}-detail`, { opacity: 0, y: 600 }, 'x')
        .from(`#${service}-detail`, { opacity: 0, y: -600 }, 'x')
      tl.play()
      this.currentService = service
    },
    scrollAnimate() {
      gsap.registerPlugin(ScrollTrigger)
      const tl = gsap.timeline()
      tl
        //DESIGN LABEL
        .add('design')
        .from(
          //design big text comes in
          '#design',
          {
            x: -400,
          },
          'design'
        )
        .from(
          '#design-detail',
          {
            //design detail comes in
            opacity: 0,
            y: -600,
          },
          'design'
        )
        //DEVELOP LABEL
        .add('develop')
        .from(
          //develop big text comes in
          '#develop',
          {
            x: -400,
          },
          'develop'
        )
        .to(
          //design detail leaves
          '#design-detail',
          {
            opacity: 0,
            y: 600,
          },
          'develop'
        )
        .from(
          '#develop-detail',
          {
            //develop detail comes in
            opacity: 0,
            y: -600,
          },
          'develop'
        )
        //ETC LLABEL
        .add('etc')
        .from(
          '#etc',
          {
            x: -400,
          },
          'etc'
        )
        .to(
          '#develop-detail',
          {
            opacity: 0,
            y: 600,
          },
          'etc'
        )
        .from(
          '#etc-detail',
          {
            opacity: 0,
            y: -600,
          },
          'etc'
        )
        //END LABEL
        .add('end')

      ScrollTrigger.create({
        animation: tl,
        trigger: '#whatwedo',
        start: 'top top',
        end: '+=4000',
        pin: true,
        // pinSpacing: false,
        scrub: 1,
        // once: true,
        anticipatePin: 1,
        onLeave: (self) => {
          //disable scroll and set current state back
          self.disable()
          gsap.set('#etc-detail', {
            y: 0,
            opacity: 100,
          })
          gsap.set('#design', { x: 0 })
          gsap.set('#develop', { x: 0 })
          gsap.set('#etc', { x: 0 })
          this.clickable = true //make text clickable
          this.currentService = 'etc'
        },
        snap: {
          snapTo: 'labels', // snap to the closest label in the timeline
          duration: { min: 0.2, max: 3 }, // the snap animation should be at least 0.2 seconds, but no more than 3 seconds (determined by velocity)
          delay: 0.2, // wait 0.2 seconds from the last scroll event before doing the snapping
          ease: 'power1.inOut', // the ease of the snap animation ("power3" by default)
        },
      })
    },
  },
}
</script>

<style></style>
